"use strict";!function a(b){function c(a){if(!a)return[];for(var b=[],d=0;d<a.length;d++){var f=a[d];if("string"==typeof f)b.push(f);else if("function"==typeof f)b.push(f);else if(Array.isArray(f))b=b.concat(c(f));else{if("object"!=typeof f||"number"!=typeof f.length)throw new e("Invalid dependency: "+JSON.stringify(f));b=b.concat(c(f))}}return b}function d(){var a=c(arguments),b={arguments:[],"function":null};if(!a.length)return b;"function"==typeof a[a.length-1]&&(b.function=a.splice(-1)[0]);for(var d in a){var f=a[d];if("string"!=typeof f)throw new e("Found "+typeof f+" but needed string: "+f);b.arguments.push(f)}return b}function e(a,b){a="Esquire: "+(a||"Unknown error");var c="";if(b&&b.length)for(var d=1;d<b.length;d++)b[d]&&(c+=" -> "+b[d]);c&&(a+=" resolving"+c),Error.call(this,a),this.name="EsquireError",this.message=a}function f(a,b){e.call(this,"Module '"+a+"' not found",b)}function g(a,b){e.call(this,"Module '"+a+"' has circular dependencies",b)}function h(a,b,c){Object.defineProperty(this,"name",{enumerable:!0,configurable:!1,value:a}),Object.defineProperty(this,"dependencies",{enumerable:!0,configurable:!1,value:b}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!1,value:c}),Object.defineProperty(this,"$$script",{enumerable:!1,configurable:!1,get:function(){return"Esquire.define("+JSON.stringify(this.name)+","+JSON.stringify(this.dependencies)+","+c.toString()+");"}}),Object.freeze(this)}function i(){if(1==arguments.length&&arguments[0].name&&arguments[0].constructor){var a=arguments[0];return i(a.name,a.dependencies||[],a.constructor)}var b,c,f,g=d(arguments);if(!g.arguments.length)throw new e("No module name specified");if(b=g.arguments.splice(0,1)[0],c=g.arguments,!g.function)throw new e("No constructor function specified for module '"+b+"'");if(f=g.function,l[b])throw new e("Module '"+b+"' already defined");return l[b]=new h(b,c,f),l[b]}function j(a,b,c){if(c||(c=[]),!a)throw new e("No module or module name specified");if("string"==typeof a){if(!l[a])throw new f(n,c);a=l[a]}if(c.indexOf(a.name)>=0)throw new g(a.name,c);var d=[];c.push(a.name);for(var h in a.dependencies){var i=a.dependencies[h],k=l[i];if(!k)throw new f(a.dependencies[h],c);if(d.push(k),b){var m=j(k,c);for(var n in m)d.push(m[n])}}return c.pop(),d}function k(){function a(b,c){if(g[b.name])return g[b.name];var d=j(b,!1,c),e=[];for(var f in d){var h=d[f];g[h.name]?e.push(g[h.name]):(c.push(b.name),e.push(a(h,c)),c.pop())}var i=b.constructor.apply(null,e);return b.name&&(g[b.name]=i),i}function c(){return 1==arguments.length&&"string"==typeof arguments[0]?f([arguments[0]],function(a){return a}):f(arguments,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a})}function f(){var b=d(arguments);if(!b.function)throw new e("Callback for injection unspecified");var c=new h(null,b.arguments,b.function);return a(c,[])}if(!(this instanceof k))return new Deferred;var g={$window:b,$esquire:this};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:f},require:{enumerable:!0,configurable:!1,value:c}})}e.prototype=new Error,e.prototype.name="EsquireError",f.prototype=new e,f.prototype.name="NoModuleError",g.prototype=new e,g.prototype.name="CircularDependencyError";var l={$window:new h("$window",[],function(){throw new e("The constructor for '$window' should not be called'")}),$esquire:new h("$esquire",[],function(){throw new e("The constructor for '$esquire' should not be called'")})};if(Object.defineProperties(k,{define:{enumerable:!0,configurable:!1,value:i},resolve:{enumerable:!0,configurable:!1,value:j},$$normalize:{enumerable:!1,configurable:!1,value:d},$$script:{enumerable:!1,configurable:!1,value:a.toString()},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in l)a[b]=l[b];return Object.freeze(a)}},module:{enumerable:!0,configurable:!1,value:function(a){return l[a]||null}}}),b.Esquire)for(var m in b.Esquire)Object.defineProperty(k,m,{enumerable:!0,configurable:!1,value:b.Esquire[m]});b.Esquire=k;var n=new k;b.esquire=function(){if(0==arguments.length)throw new e("No dependencies/callback specified");var a=d(arguments);return a.function?n.inject(a.arguments,a.function):n.require(a.arguments)}}(window);
"use strict";!function a(b){function c(a){if(!a)return[];for(var b=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e)b.push(e);else if("function"==typeof e)b.push(e);else{if("object"!=typeof e)throw new g("Invalid dependency: "+e);b=b.concat(c(e))}}return b}function d(){var a=c(arguments),b={arguments:[],"function":null};if(!a.length)return b;"function"==typeof a[a.length-1]&&(b.function=a.splice(-1)[0]);for(var d in a){var e=a[d];if("string"!=typeof e)throw new g("Found "+typeof e+" but needed string: "+e);b.arguments.push(e)}return b}function e(a,b,c){Object.defineProperty(this,"name",{enumerable:!0,configurable:!1,value:a}),Object.defineProperty(this,"dependencies",{enumerable:!0,configurable:!1,value:b}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!1,value:c})}function f(){if(1==arguments.length&&arguments[0].name&&arguments[0].constructor){var a=arguments[0];return f(a.name,a.dependencies||[],a.constructor)}var b,c,h,i=d(arguments);if(!i.arguments.length)throw new g("No module name specified");if(b=i.arguments.splice(0,1)[0],c=i.arguments,!i.function)throw new g("No constructor function specified for module '"+b+"'");if(h=i.function,k[b])throw new g("Module '"+b+"' already defined");return k[b]=new e(b,c,h),k[b]}function g(a,b){if(a="Esquire: "+(a||"Unknown error"),b&&b.length>1){a+=" resolving";for(var c=1;c<b.length;c++)a+=" -> '"+b[c]+"'"}this.constructor.prototype.__proto__=Error.prototype,Error.call(this,a),this.name="EsquireError",this.message=a}function h(a){g.call(this,"Module '"+a+"' not found")}function i(a){g.call(this,"Module '"+a+"' has circular dependencies")}function j(){function a(b,c,d){if(b&&f.hasOwnProperty(b))return f[b];if(d||(d=k[b]),!d)throw new h(b,c);if(c.indexOf(b)>=0)throw new i(b,c);var e=[];c.push(b);for(var g in d.dependencies)e.push(a(d.dependencies[g],c));c.pop(),b&&console.debug("Esquire: Instantiating module '"+b+"'");var j=d.constructor.apply(null,e);return b&&(f[b]=j),j}function b(){return 1==arguments.length&&"string"==typeof arguments[0]?c([arguments[0]],function(a){return a}):c(arguments,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a})}function c(){var b=d(arguments);if(!b.function)throw new g("Callback for injection unspecified");var c=new e(null,b.arguments,b.function);return a(c.name,[],c)}if(!(this instanceof j))return new Deferred;var f={};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:c},require:{enumerable:!0,configurable:!1,value:b}})}var k={};if(Object.defineProperties(j,{define:{enumerable:!0,configurable:!1,value:f},$$script:{enumerable:!1,configurable:!1,value:a.toString()},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in k)a[b]=Object.freeze(k[b]);return Object.freeze(a)}}}),b.Esquire)for(var l in b.Esquire)Object.defineProperty(j,l,{enumerable:!0,configurable:!1,value:b.Esquire[l]});b.Esquire=j;var m=new j;b.esquire=function(){if(0==arguments.length)return void 0;if(1==arguments.length&&"function"==typeof arguments[0])throw new g("Invalid parameter for static injection");return 2==arguments.length&&"function"==typeof arguments[1]?m.inject(arguments[0],arguments[1]):m.require(arguments)}}(self);
"use strict";!function(a){function b(a){if(!a)return[];for(var c=[],e=0;e<a.length;e++){var f=a[e];if("string"==typeof f)c.push(f);else{if(!Array.isArray(f))throw new d("Invalid dependency: "+f);c=c.concat(b(f))}}return c}function c(a,c,e){if("string"!=typeof a)throw new d("Invalid module name: "+a);if(h[a])throw new d("Module '"+a+"' already defined");if("function"!=typeof e)throw new d("Constructor for module '"+a+"' is not a function: "+e);c=b(c),console.debug("Esquire: Defining module '"+a+"'"),h[a]=Object.freeze({dependencies:c,constructor:e})}function d(a,b){if(a="Esquire: "+(a||"Unknown error"),b&&b.length>1){a+=" resolving";for(var c=1;c<b.length;c++)a+=" -> '"+b[c]+"'"}this.constructor.prototype.__proto__=Error.prototype,Error.call(this,a),this.name="EsquireError",this.message=a}function e(a){d.call(this,"Module '"+a+"' not found")}function f(a){d.call(this,"Module '"+a+"' has circular dependencies")}function g(){function a(b,c,d){if(b&&j.hasOwnProperty(b))return j[b];if(d||(d=h[b]),!d)throw new e(b,c);if(c.indexOf(b)>=0)throw new f(b,c);var g=[];c.push(b);for(var i in d.dependencies)g.push(a(d.dependencies[i],c));c.pop(),b&&console.debug("Esquire: Instantiating module '"+b+"'");var k=d.constructor.apply(null,g);return b&&(j[b]=k),k}function c(a){return 1==arguments.length&&"string"==typeof a?i([a],function(a){return a}):(a=b(arguments),i(a,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a}))}function i(c,e){if(null==e)e=function(){};else if("function"!=typeof e)throw new d("Injection callback is not a function: "+e);return c=b(c),a(null,[],{dependencies:c,constructor:e})}if(!(this instanceof g))return new Deferred;var j={};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:i},require:{enumerable:!0,configurable:!1,value:c}})}var h={};if(Object.defineProperties(g,{define:{enumerable:!0,configurable:!1,value:c},$$script:{enumerable:!1,configurable:!1,get:function(){var a="(function(s){\n  var modules={};";return a+="\n  s.Esquire="+g.toString(),a+="\n  s.Esquire.define="+c.toString(),a+="\n})(self);"}},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in h)a[b]=Object.freeze(h[b]);return Object.freeze(a)}}}),a.Esquire)for(var i in a.Esquire)Object.defineProperty(g,i,{enumerable:!0,configurable:!1,value:a.Esquire[i]});a.Esquire=g;var j=new g;a.esquire=function(){if(0==arguments.length)return void 0;if(1==arguments.length&&"function"==typeof arguments[0])throw new d("Invalid parameter for static injection");return 2==arguments.length&&"function"==typeof arguments[1]?j.inject(arguments[0],arguments[1]):j.require(arguments)}}(self);
"use strict";!function(a){function b(a){if(!a)return[];for(var c=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e)c.push(e);else{if(!Array.isArray(e))throw new Error("Esquire: Invalid dependency: "+e);c=c.concat(b(e))}}return c}function c(a,c,d){if("string"!=typeof a)throw new Error("Esquire: Invalid module name: "+a);if(g[a])throw new Error("Esquire: Module '"+a+"' already defined");if("function"!=typeof d)throw new Error("Esquire: Constructor for module '"+a+"' is not a function: "+d);c=b(c),console.debug("Esquire: Defining module '"+a+"'"),g[a]=Object.freeze({dependencies:c,constructor:d})}function d(a,b){Error.call(this);var c="Esquire: Module '"+a+"' not found";if(b.length>1){c+=" resolving";for(var d=1;d<b.length;d++)c+=" -> '"+b[d]+"'"}this.message=c}function e(a,b){Error.call(this);var c="Esquire: Module '"+a+"' has circular dependencies";if(b.length>1){c+=" resolving";for(var d=1;d<b.length;d++)c+=" -> '"+b[d]+"'"}this.message=c}function f(){function a(b,c,f){if(b&&i.hasOwnProperty(b))return i[b];if(f||(f=g[b]),!f)throw new d(b,c);if(c.indexOf(b)>=0)throw new e(b,c);var h=[];c.push(b);for(var j in f.dependencies)h.push(a(f.dependencies[j],c));c.pop(),b&&console.debug("Esquire: Instantiating module '"+b+"'");var k=f.constructor.apply(null,h);return b&&(i[b]=k),k}function c(a){return 1==arguments.length&&"string"==typeof a?h([a],function(a){return a}):(a=b(arguments),h(a,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a}))}function h(c,d){if(null==d)d=function(){};else if("function"!=typeof d)throw new Error("Esquire: Injection callback is not a function: "+d);return c=b(c),a(null,[],{dependencies:c,constructor:d})}if(!(this instanceof f))return new Deferred;var i={};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:h},require:{enumerable:!0,configurable:!1,value:c}})}var g={};if(Object.defineProperties(f,{define:{enumerable:!0,configurable:!1,value:c},$$script:{enumerable:!1,configurable:!1,get:function(){var a="(function(s){\n  var modules={};";return a+="\n  s.Esquire="+f.toString(),a+="\n  s.Esquire.define="+c.toString(),a+="\n})(self);"}},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in g)a[b]=Object.freeze(g[b]);return Object.freeze(a)}}}),a.Esquire)for(var h in a.Esquire)Object.defineProperty(f,h,{enumerable:!0,configurable:!1,value:a.Esquire[h]});a.Esquire=f}(self);
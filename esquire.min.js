"use strict";!function(a){function b(a){if(!a)return[];for(var c=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e)c.push(e);else{if(!Array.isArray(e))throw new Error("Esquire: Invalid dependency: "+e);c=c.concat(b(e))}}return c}function c(a,c,d){if("string"!=typeof a)throw new Error("Esquire: Invalid module name: "+a);if(g[a])throw new Error("Esquire: Module '"+a+"' already defined");if("function"!=typeof d)throw new Error("Esquire: Constructor for module '"+a+"' is not a function: "+d);c=b(c),console.debug("Esquire: Defining module '"+a+"'"),g[a]=Object.freeze({dependencies:c,constructor:d})}function d(a,b){Error.call(this);var c="Esquire: Module '"+a+"' not found";if(b.length>1){c+=" resolving";for(var d=1;d<b.length;d++)c+=" -> '"+b[d]+"'"}this.message=c}function e(a,b){Error.call(this);var c="Esquire: Module '"+a+"' has circular dependencies";if(b.length>1){c+=" resolving";for(var d=1;d<b.length;d++)c+=" -> '"+b[d]+"'"}this.message=c}function f(){function a(b,c,f){if(b&&i.hasOwnProperty(b))return i[b];if(f||(f=g[b]),!f)throw new d(b,c);if(c.indexOf(b)>=0)throw new e(b,c);var h=[];c.push(b);for(var j in f.dependencies)h.push(a(f.dependencies[j],c));c.pop(),b&&console.debug("Esquire: Instantiating module '"+b+"'");var k=f.constructor.apply(null,h);return b&&(i[b]=k),k}function c(a){return 1==arguments.length&&"string"==typeof a?h([a],function(a){return a}):(a=b(arguments),h(a,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a}))}function h(c,d){if(null==d)d=function(){};else if("function"!=typeof d)throw new Error("Esquire: Injection callback is not a function: "+d);return c=b(c),a(null,[],{dependencies:c,constructor:d})}if(!(this instanceof f))return new Deferred;var i={};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:h},require:{enumerable:!0,configurable:!1,value:c}})}var g={};if(Object.defineProperties(f,{define:{enumerable:!0,configurable:!1,value:c},$$script:{enumerable:!1,configurable:!1,get:function(){var a="(function(s){\n  var modules={};";return a+="\n  s.Esquire="+f.toString(),a+="\n  s.Esquire.define="+c.toString(),a+="\n})(self);"}},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in g)a[b]=Object.freeze(g[b]);return Object.freeze(a)}}}),a.Esquire)for(var h in a.Esquire)Object.defineProperty(f,h,{enumerable:!0,configurable:!1,value:a.Esquire[h]});a.Esquire=f}(self),function(){function a(b,c){var d=0,e=null,f=[],g=function(a){if(0==d){if(e=a,d=1,b)try{e=b(e)}catch(c){e=c,d=-1}j(f)}},h=function(a){if(0==d){if(e=a,d=-1,c)try{e=c(e),d=1}catch(b){e=b}j(f)}},i=function(b,c){var e=new a(b,c);return 0==d?f.push(e):j([e]),e.promise},j=function(a){var b=d>0?"resolve":0>d?"reject":null;if(b)for(var c in a)a[c][b](e)},k=Object.defineProperties(new Object,{then:{enumerable:!0,configurable:!1,value:i},"catch":{enumerable:!0,configurable:!1,value:function(a){return i(null,a)}}});return Object.defineProperties(this,{promise:{enumerable:!0,configurable:!1,value:k},resolve:{enumerable:!0,configurable:!1,value:g},reject:{enumerable:!0,configurable:!1,value:h}})}function b(a){if(!a)return[];for(var c=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e)c.push(e);else{if(!Array.isArray(e))throw new Error("Esquire: Invalid dependency: "+e);c=c.concat(b(e))}}return c}function c(a){var b=a.filename||a.target&&a.target.src;if(h[b]){if(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.target&&a.target.parentNode)try{a.target.parentNode.removeChild(a.target)}catch(c){}var d=h[b];return delete h[b],d.remaining-=1,{script:b,promise:d}}}function d(a){var b=c(a);b&&(console.debug("Esquire: Successfully loaded script '",b.script,"'"),0==b.promise.remaining&&b.promise.resolve(Esquire.modules))}function e(a){var b=c(a);if(b){console.warn("Esquire: Unable to load script '",b.script,"'");var d=a.error||new Error("Unable to load script '"+b.script+"'");b.promise.reject(d)}}function f(){if(!i)throw new Error("Esquire: Document not available");var c=i.getElementsByTagName("script")[0],f=c.parentNode,j=new a(function(a){return a},function(a){throw a});j.remaining=0;var k=b(arguments),l=[];for(var m in k)!function(a){var b=i.createElement("script");b.async=!0,b.defer=!0,b.src=a,a=b.src,g[a]?console.debug("Esquire: Script '"+a+"' already loaded"):h[a]?console.debug("Esquire: Script '"+a+"' already being loaded"):(b.addEventListener("load",d,!1),b.addEventListener("error",e,!1),h[a]=j,j.remaining+=1,l.push(b))}(k[m]);if(0==l.length)j.resolve(Esquire.modules);else for(var m in l)console.debug("Esquire: About to load '"+l[m].src+"'"),f.insertBefore(l[m],c);return j.promise}var g={},h={};window.addEventListener("error",e,!0);var i=window.document;window.Esquire||(window.Esquire={}),window.Esquire.load=f}();
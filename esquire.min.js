"use strict";!function a(b){function c(a,b){if(!(this instanceof c))return new c(a,b);var d=0,e=null,f=[],g=function(a){var b=d>0?"resolve":0>d?"reject":null;if(b)for(var c in a)a[c][b](e)},h=this;Object.defineProperties(this,{resolve:{enumerable:!0,configurable:!1,value:function(b){if(b&&"function"==typeof b.then)b.then(function(a){h.resolve(a)},function(a){h.reject(a)});else if(0==d){if(e=b,d=1,a)try{e=a(e)}catch(c){e=c,d=-1}g(f)}}},reject:{enumerable:!0,configurable:!1,value:function(a){if(0==d){if(e=a,d=-1,b)try{e=b(e),d=1}catch(c){e=c}g(f)}}},promise:{enumerable:!0,configurable:!1,value:Object.defineProperties(new Object,{then:{enumerable:!0,configurable:!1,value:function(a,b){var e=new c(a,b);return 0==d?f.push(e):g([e]),e.promise}},"catch":{enumerable:!0,configurable:!1,value:function(a){return this.then(null,a)}}})}})}function d(a){if(!(this instanceof d))return new d(a);if("function"!=typeof a)throw new TypeError("Executor is not a function");var b=new c;Object.defineProperty(this,"then",{enumerable:!0,configurable:!1,value:b.promise.then}),Object.defineProperty(this,"catch",{enumerable:!0,configurable:!1,value:b.promise["catch"]});try{a(b.resolve,b.reject)}catch(e){b.reject(e)}}function e(a,b){a="Esquire: "+(a||"Unknown error");var c="";if(b&&b.length)for(var d=0;d<b.length;d++)b[d]&&(c+=" -> "+b[d]);if(c&&(a+=" resolving"+c),Error.call(this,a),this.message=a,this.stack){var e=this.stack;e=e.replace(new RegExp("^"+this.name+"\n"),""),this.stack=this.name+": "+this.message+"\n"+e}}function f(a,b){e.call(this,"Module '"+a+"' not found",b)}function g(a,b,c){e.call(this,"Module '"+a+"' failed to initialize",c),b&&(this.message=this.message+" [Cause: "+(b.message?b.message:"[no message]")+"]",this.cause=b)}function h(a,b){e.call(this,"Module '"+a+"' has circular dependencies",b)}function i(a,b,c,d){a=o(a);for(var e in b)b[e]=o(b[e]);Object.defineProperty(this,"name",{enumerable:!0,configurable:!1,value:a}),Object.defineProperty(this,"dependencies",{enumerable:!0,configurable:!1,value:b}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!1,value:c}),Object.defineProperty(this,"$$dynamic",{enumerable:!1,configurable:!1,value:d||!1}),Object.defineProperty(this,"$$script",{enumerable:!1,configurable:!1,get:function(){return"Esquire.define("+JSON.stringify(this.name)+","+JSON.stringify(this.dependencies)+","+c.toString()+");"}}),Object.freeze(this)}function j(a){i.call(this,a,["$global"],function(a){function b(a,c,d){if(!d&&a in c)return c[a];var e=["Ms","ms","Moz","moz","WebKit","webkit"];for(var f in e){var g=e[f]+a;if(g in c)return c[g]}return a[0]!==a[0].toUpperCase()?b(a[0].toUpperCase()+a.substring(1),c,!0):void 0}function c(a,d){if(!d)return void 0;if(!a)return void 0;switch(a.length){case 0:return void 0;case 1:return b(a[0],d);default:return c(a.slice(1),b(a[0],d))}}return c(this.name.substring(8).split("."),a)},!0)}function k(a){i.call(this,a,[],function(){throw new e("The constructor for '"+a+"' should not be called'")},!0)}function l(a){if(!a)return[];for(var b=[],c=0;c<a.length;c++){var d=a[c];if("string"==typeof d)b.push(d);else if("function"==typeof d)b.push(d);else if(Array.isArray(d))b=b.concat(l(d));else{if("object"!=typeof d||"number"!=typeof d.length)throw new e("Invalid dependency: "+JSON.stringify(d));b=b.concat(l(d))}}return b}function m(){var a=l(arguments),b={arguments:[],"function":null};if(!a.length)return b;"function"==typeof a[a.length-1]&&(b.function=a.splice(-1)[0]);for(var c in a){var d=a[c];if("string"!=typeof d)throw new e("Found "+typeof d+" but needed string: "+d);b.arguments.push(d)}return b}function n(a){return/^\$global[\/\.].+/.test(a)}function o(a){return n(a)?"$global/"+a.substring(8):a}function p(){if(1==arguments.length&&arguments[0].name&&arguments[0].constructor){var a=arguments[0];return p(a.name,a.dependencies||[],a.constructor)}var b,c,d=m(arguments),f=[];if(!d.arguments.length)throw new e("No module name specified");if(b=o(d.arguments.splice(0,1)[0]),f=d.arguments,s[b])throw new e("Module '"+b+"' already defined");if(!d.function)throw new e("No constructor function specified for module '"+b+"'");return c=d.function,s[b]=new i(b,f,c),s[b]}function q(a,b,c){if(c||(c=[]),!a)throw new e("No module or module name specified");if("string"==typeof a){if(!s[a])throw new f(m,c);a=s[a]}if(c.indexOf(a.name)>=0)throw new h(a.name,c);var d=[];c.push(a.name);for(var g in a.dependencies){var i=a.dependencies[g],k=s[i];if(k){if(d.push(k),b){var l=q(k,c);for(var m in l)d.push(l[m])}}else{if(!n(i))throw new f(a.dependencies[g],c);d.push(new j(i))}}return c.pop(),d}function r(a){function f(c,d){if(l[c.name])return l[c.name];var h=q(c,!1,d),i=[];for(var j in h){var m=h[j];l[m.name]?i.push(l[m.name]):(d.push(c.name),i.push(f(m,d)),d.pop())}var n=d.slice(0),o=new k(function(f,h){var j=a-10*d.length,l=b.setTimeout(function(){h(new e("Timeout reached waiting for module '"+c.name+"'",n))},50>j?50:j),m=function(a){b.clearTimeout(l),f(a)},o=function(a){b.clearTimeout(l),h(a)};k.all(i).then(function(a){try{var b=c.constructor.apply(c,a);k.resolve(b).then(function(a){m(a)},function(a){o(new g(c.name,a,n)),o(a)})}catch(d){o(new g(c.name,d,n))}},function(a){o(a)})});return c.name&&!c.$$dynamic&&(l[c.name]=o),o}function h(){return 1==arguments.length&&"string"==typeof arguments[0]?j([arguments[0]],function(a){return a}):j(arguments,function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a})}function j(){var a=m(arguments);if(!a.function)throw new e("Callback for injection unspecified");var b=new i(null,a.arguments,a.function);try{return f(b,[])}catch(c){return k.reject(c)}}if(!(this instanceof r))return new r(k);var k=b.Promise||d;if(void 0===a)a=2e3;else{if(a=Number(a),0/0===a)throw new e("Timeout is not a number");if(100>a)throw new e("Timeout must be greater or equal than 100ms")}var l={$global:b,$esquire:this,$promise:k,$deferred:c};Object.defineProperties(this,{inject:{enumerable:!0,configurable:!1,value:j},require:{enumerable:!0,configurable:!1,value:h}})}c.prototype=Object.create(Object.prototype),c.prototype.constructor=c,c.prototype.name="Deferred",d.prototype=Object.create(Object.prototype),d.prototype.constructor=d,d.prototype.name="Promise",Object.defineProperty(d,"all",{enumerable:!0,configurable:!1,value:function(a){if(!Array.isArray(a))return d.reject(new TypeError("Invalid argument"));var b=[];for(var e in a)b.push(d.resolve(a[e]));if(0==b.length)return d.resolve([]);for(var f=new c,g=new Array(b.length),h=b.length,e=0;e<b.length;e++)!function(a){b[a].then(function(b){g[a]=b,0==--h&&f.resolve(g)},function(a){f.reject(a)})}(e);return f.promise}}),Object.defineProperty(d,"race",{enumerable:!0,configurable:!1,value:function(a){if(!Array.isArray(a))return d.reject(new TypeError("Invalid argument"));var b=new c;for(var e in a)d.resolve(a[e]).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise}}),Object.defineProperty(d,"resolve",{enumerable:!0,configurable:!1,value:function(a){return new d(function(b,c){a&&a.then&&"function"==typeof a.then?a.then(b,c):b(a)},!0)}}),Object.defineProperty(d,"reject",{enumerable:!0,configurable:!1,value:function(a){return new d(function(b,c){c(a)},!0)}}),e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="EsquireError",f.prototype=Object.create(e.prototype),f.prototype.constructor=f,f.prototype.name="NoModuleError",g.prototype=Object.create(e.prototype),g.prototype.constructor=g,g.prototype.name="ModuleConstructorError",h.prototype=Object.create(e.prototype),h.prototype.constructor=h,h.prototype.name="CircularDependencyError",j.prototype=Object.create(i.prototype),j.prototype.constructor=j,j.prototype.name="GlobalModule",k.prototype=Object.create(i.prototype),k.prototype.constructor=k,k.prototype.name="InternalModule";var s={$global:new k("$global"),$esquire:new k("$esquire"),$promise:new k("$promise"),$deferred:new k("$deferred")};if(Object.defineProperties(r,{$$script:{enumerable:!1,configurable:!1,value:a.toString()},$$normalize:{enumerable:!1,configurable:!1,value:m},$$Promise:{enumerable:!1,configurable:!1,value:d},$$Deferred:{enumerable:!1,configurable:!1,value:c},define:{enumerable:!0,configurable:!1,value:p},resolve:{enumerable:!0,configurable:!1,value:q},modules:{enumerable:!0,configurable:!1,get:function(){var a={};for(var b in s)a[b]=s[b];return Object.freeze(a)}},module:{enumerable:!0,configurable:!1,value:function(a){return a=o(a),a in s?s[a]:n(a)?new j(a):null}}}),b.Esquire)throw new Error("Esquire already defined in global scope");b.Esquire=r;var t=new r;b.esquire=function(){if(0==arguments.length)throw new e("No dependencies/callback specified");var a=m(arguments);return a.function?t.inject(a.arguments,a.function):t.require(1==arguments.length&&"string"==typeof arguments[0]?arguments[0]:a.arguments)}}(function(){try{return window}catch(a){return global}}()),function(a){function b(a){var b=a.filename||a.target&&a.target.src;if(g[b]){if(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.target&&a.target.parentNode)try{a.target.parentNode.removeChild(a.target)}catch(c){}var d=g[b];return delete g[b],d.remaining-=1,{script:b,promise:d}}}function c(a){var c=b(a);c&&(console.debug("Esquire: Successfully loaded script '",c.script,"'"),0==c.promise.remaining&&c.promise.resolve(Esquire.modules))}function d(a){var c=b(a);if(c){console.warn("Esquire: Unable to load script '",c.script,"'");var d=a.error||new Error("Unable to load script '"+c.script+"'");c.promise.reject(d)}}function e(){if(!h)throw new Error("Esquire: Document not available");var a=h.getElementsByTagName("script")[0],b=a.parentNode,e=new Esquire.$$Deferred(function(a){return a},function(a){throw a});e.remaining=0;var i=Esquire.$$normalize(arguments).arguments,j=[];for(var k in i)!function(a){var b=h.createElement("script");b.async=!0,b.defer=!0,b.src=a,a=b.src,f[a]?console.debug("Esquire: Script '"+a+"' already loaded"):g[a]?console.debug("Esquire: Script '"+a+"' already being loaded"):(b.addEventListener("load",c,!1),b.addEventListener("error",d,!1),g[a]=e,e.remaining+=1,j.push(b))}(i[k]);if(0==j.length)e.resolve(Esquire.modules);else for(var k in j)console.debug("Esquire: About to load '"+j[k].src+"'"),b.insertBefore(j[k],a);return e.promise}if(!a.Esquire)throw new Error("Esquire not available");var f={},g={};a.addEventListener("error",d,!0);var h=a.document;a.Esquire||(a.Esquire={}),a.Esquire.load=e}(window);